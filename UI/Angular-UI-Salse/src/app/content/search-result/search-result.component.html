
<div [ngClass]="{'visible':!(visibleBasket || visibleDetails),'hidden':(visibleBasket || visibleDetails)}">
  <div class="main-search" [ngStyle]="{'background-image': 'url('+them.BackgroundImageUrl+')'}">
    <h1 class="threed">{{them.ProductGroupName}}</h1>
  </div>
  <div class="container">

    <!--جستجو-->
    <div class="row">
      <div class="col">
        <div class="search_container">

          <div class="search_form_container">
            <form action="#" class="search_form" id="search_form" [ngStyle]="{'color': them.HeaderFontColor,'background-color':them.HeaderColor}">
              <div class="d-flex flex-lg-row flex-column align-items-start justify-content-lg-between justify-content-start">
                <div class="search_inputs d-flex flex-lg-row flex-column align-items-start justify-content-lg-between justify-content-start">


                  <div>
                    <div class="display-flex">
                    <input type="text" class="search_input" *ngIf="productservice.ParamShowSearch.length > 0" [placeholder]="productservice.ParamShowSearch.length > 0 ?productservice.ParamShowSearch[0].GroupTypeName:''" 
                    (click)="productservice.ShowListParam1()" [(ngModel)]="productservice.Param1" 
                    [ngModelOptions]="{standalone: true}"  id="Param1" autocomplete="off" readonly><!--(keyup)="productservice.BasicDataFilter($event)"-->
                    <span class="clear-texbox" id="span1" (click)="productservice.ParamClose('span1','Param1')" >&times;</span>
                  </div>
                    <div class="dropdown-search" *ngIf="productservice.Param1Show">
                      <option *ngFor="let item of productservice.basicDataParam1" [attr.data-id]="item.ID" [attr.data-text]="item.Title" (click)=productservice.DataParam1Select(item.ID,item.Title)>
                        {{item.Title}}
                      </option>
                    </div>
                  </div>

                  <div>
                    <div class="display-flex">
                    <input type="text" class="search_input" *ngIf="productservice.ParamShowSearch.length > 1" readonly [placeholder]="productservice.ParamShowSearch.length > 0 ?productservice.ParamShowSearch[1].GroupTypeName:''" (click)="productservice.ShowListParam2()" [(ngModel)]="productservice.Param2" [ngModelOptions]="{standalone: true}" (keyup)="productservice.BasicDataFilter($event)" id="Param2" autocomplete="off">
                    <span class="clear-texbox" id="span2" (click)="productservice.ParamClose('span2','Param2')" >&times;</span>
                   
                  </div>
                    <div class="dropdown-search" *ngIf="productservice.Param2Show">
                      <option *ngFor="let item of productservice.basicDataParam2" [attr.data-id]="item.ID" [attr.data-text]="item.Title" (click)=productservice.DataParam2Select(item.ID,item.Title)>
                        {{item.Title}}
                      </option>
                    </div>
                  </div>

                  <div>
                    <div class="display-flex">
                    <input type="text" class="search_input" *ngIf="productservice.ParamShowSearch.length > 2"  readonly [placeholder]="productservice.ParamShowSearch.length > 0 ?productservice.ParamShowSearch[2].GroupTypeName:''" (click)="productservice.ShowListParam3()" [(ngModel)]="productservice.Param3" [ngModelOptions]="{standalone: true}" (keyup)="productservice.BasicDataFilter($event)" id="Param3" autocomplete="off">
                    <span class="clear-texbox" id="span3" (click)="productservice.ParamClose('span3','Param3')" >&times;</span>
                   
                  </div>
                    <div class="dropdown-search" *ngIf="productservice.Param3Show">
                      <option *ngFor="let item of productservice.basicDataParam3" [attr.data-id]="item.ID" [attr.data-text]="item.Title" (click)=productservice.DataParam3Select(item.ID,item.Title)>
                        {{item.Title}}
                      </option>
                    </div>
                  </div>
                  <div>
                    <div class="display-flex">
                    <input type="text" class="search_input" *ngIf="productservice.ParamShowSearch.length > 3" readonly [placeholder]="productservice.ParamShowSearch.length > 0 ?productservice.ParamShowSearch[3].GroupTypeName:''" (click)="productservice.ShowListParam4()" [(ngModel)]="productservice.Param4" [ngModelOptions]="{standalone: true}" (keyup)="productservice.BasicDataFilter($event)" id="Param4" autocomplete="off">
                    <span class="clear-texbox" id="span4" (click)="productservice.ParamClose('span4','Param4')" >&times;</span>
                   
                  </div>
                    <div class="dropdown-search" *ngIf="productservice.Param4Show">
                      <option *ngFor="let item of productservice.basicDataParam4" [attr.data-id]="item.ID" [attr.data-text]="item.Title" (click)=productservice.DataParam4Select(item.ID,item.Title)>
                        {{item.Title}}
                      </option>
                    </div>
                  </div>
                  <div>
                    <div class="display-flex">
                    <input type="text" class="search_input" *ngIf="productservice.ParamShowSearch.length > 4" readonly [placeholder]="productservice.ParamShowSearch.length > 0 ?productservice.ParamShowSearch[4].GroupTypeName:''" (click)="productservice.ShowListParam5()" [(ngModel)]="productservice.Param5" [ngModelOptions]="{standalone: true}" (keyup)="productservice.BasicDataFilter($event)" id="Param5" autocomplete="off">
                    <span class="clear-texbox" id="span5" (click)="productservice.ParamClose('span5','Param5')" >&times;</span>
                   
                  </div>
                    <div class="dropdown-search" *ngIf="productservice.Param5Show">
                      <option *ngFor="let item of productservice.basicDataParam5" [attr.data-id]="item.ID" [attr.data-text]="item.Title" (click)=productservice.DataParam5Select(item.ID,item.Title)>
                        {{item.Title}}
                      </option>
                    </div>

                  </div>


                </div>
                <button class="search_button" Id="search_button" [ngStyle]="{'color': them.ButtonFontColor,'background-color':them.ButtonColor}" (click)="SearchProduct('param')">{{ 'Search' | translate }} </button>

              </div>

            </form>
          </div>
        </div>
      </div>
    </div>

    
    <!--جستجو سریع-->
    <app-easy-search></app-easy-search>
    <!--فیلتر-->
    <div class="row" style="margin-top: 25px;">
      
      <div class="col-md-9 sort-color">

        <span class="sort-icon"><i class="fa fa-sort sort-icon"></i>{{'SortBy' | translate}}</span>

        <button class="btn btn-outline-success btn-sm m-1" id="Arzan" (click)="onSortBy('PriceSales','1','Arzan')">{{'Cheapest' | translate}} </button>
        <button class="btn btn-outline-success btn-sm m-1" id="Geran" (click)="onSortBy('PriceSales','0','Geran')">{{'Expensive' | translate}}</button>
        <button class="btn btn-outline-success btn-sm m-1" id="VisitedCount" (click)="onSortBy('VisitedCount','0','VisitedCount')">{{'TheMostVisited' | translate}}</button>
        <button class="btn btn-outline-success btn-sm m-1" id="IsAvailable" (click)="onSortBy('IsAvailable','0','IsAvailable')">{{'OnlyAvailable' | translate}}</button>
        <button class="btn btn-outline-success btn-sm m-1" id="IsSpecialSales" (click)="onSortBy('IsSpecialSales','0','IsSpecialSales')">{{'SpecialSale' | translate}}</button>
        
      </div>
      <div class="col-md-3" >
        <button style="float: left;" class="btn btn-outline-danger btn-sm m-1" [ngClass]="{'btn-danger':Vertical,'btn-outline-danger':!Vertical}" id="Vertical" (click)="Vertical=!Vertical">{{'Vertical' | translate}}</button>
        <button style="float: left;" class="btn btn-outline-danger btn-sm m-1" [ngClass]="{'btn-danger':!Vertical,'btn-outline-danger':Vertical}" id="Horizontal" (click)="Vertical=!Vertical">{{'Horizontal' | translate}}</button>
      </div>

    </div>
    <!--لیست محصولات-->
    <app-product-list-small [products]="Product" [IsHomePage]="false" *ngIf="!Vertical" ></app-product-list-small>
    <app-product-list-large [products]="Product" [IsHomePage]="false" *ngIf="Vertical"></app-product-list-large>
    <!--صفحه بندی-->
    <div class="row" *ngIf="productservice.Paggin.length>0">
      <div class="col-md-12">

        <nav aria-label="Page navigation">
          <span class="sort-color"> {{'PageTo' | translate}}  </span>
          <ul class="pagination">
            <li class="page-item">
              <a class="page-link" (click)="onSelectPaggingPrevious(-1)" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
              </a>
            </li>
            <li class="page-item" *ngFor="let item of productservice.Paggin">
              <a class="page-link" (click)="onSelectPagging(item.pageNumber)" id="a{{item.pageNumber}}">{{item.pageNumber}}</a>
            </li>

            <li class="page-item">
              <a class="page-link" (click)="onSelectPaggingPrevious(1)" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <!--PageGenerator_2--->
    <div id="PageGenerator_2">

    </div>

  </div>
</div>


<!--سبد خرید-->
<div [ngClass]="{'visible':visibleBasket,'hidden':!visibleBasket}">
  <div class="container">
    <div class="card m-5 bg-secondary">
      <h5 class="card-header text-white">
        <span style="float:right">
          <i class="fa fa-shopping-basket"></i> {{'Menu.ShoppingBasket' | translate}}
        </span>

      </h5>
      
      <div class="card-body">
        <div class="respons">
          <table class="table table-bordered table-secondary">
            <thead class="thead-light">

              <tr>
                <th scope="col">{{'ProductName' | translate}}</th>
                <th scope="col">{{'Count' | translate}}</th>
                <th scope="col">{{'UnitPrice' | translate}}</th>
                <th scope="col">{{'Total' | translate}}</th>
                <th scope="col">{{'Discount' | translate}}</th>
                <th scope="col">{{'Panel.Delete' | translate}}</th>
              </tr>

            </thead>
            <tbody>

              <tr *ngFor="let item of productservice.Order.OrderDetails" class="respons-basket">
                <td>{{item.ProducName}}</td>
                <td><input type="number" min="1" max="{{item.AvalaibleCount}}" (change)="AvalaibleCount()" [(ngModel)]="item.ShoppingCount" [ngModelOptions]="{standalone: true}" /></td>
                <td>{{item.UnitPrice  | number:'4.0-0'}}</td>
                <td>{{item.UnitPrice*item.ShoppingCount  | number:'4.0-0'}}</td>
                <td>{{item.TotalDiscount  | number:'4.0-0'}}</td>
                <td><button class="btn text-danger" ngbTooltip="{{'Panel.Delete' | translate}}" (click)="DeleteBasket(item.ProductID)"><i class="fa fa-trash"></i></button></td>
              </tr>
              <tr class="text-danger">

                <td colspan="4">
                  <span style="float:left">{{'Total' | translate}} : </span>

                </td>
                <td> {{Total | number:'4.0-0'}}</td>
                <td>
                  
                  <button class="btn_price" style="margin-top:10px;" (click)="onCloseDetails()"> <i class="fa fa-arrow-circle-right"></i>  {{'BackToList' | translate}}</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="card text-dark mb-3">
          <div class="card-header">{{'CustomerInformation' | translate}} </div>
          <div class="card-body">
            <form [formGroup]="CustomerForm">
              <div class="form-group row">
                <label for="Mobile" class="col-sm-3 col-form-label">{{'Panel.Mobile' | translate}} <samp style="font-size:11px">({{'Panel.required' | translate}})</samp></label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="Mobile" placeholder="09126700000" maxlength="14" formControlName="Mobile" [ngClass]="{ 'has-error': isSubmitted && formControlsCustomer.Mobile.errors }" />
                  <samp *ngIf="isSubmitted && formControlsCustomer.Mobile.errors" class="error-red">{{'Panel.required' | translate}}</samp>
                </div>
              </div>
              <div class="form-group row">
                <label for="staticCodeMelli" class="col-sm-3 col-form-label">{{'Panel.CodeMelli' | translate}} <samp style="font-size:11px">({{'Panel.required' | translate}})</samp></label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="staticCodeMelli" placeholder="0050000000" maxlength="10" formControlName="CodeMelli" [ngClass]="{ 'has-error': isSubmitted && formControlsCustomer.CodeMelli.errors }" />
                  <samp *ngIf="isSubmitted && formControlsCustomer.CodeMelli.errors" class="error-red">{{'Panel.required' | translate}}</samp>
                </div>
              </div>
              <div class="form-group row">
                <label for="FullName" class="col-sm-3 col-form-label"> {{'FullName' | translate}}<samp style="font-size:11px">({{'Panel.required' | translate}})</samp></label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="FullName" formControlName="FullName" maxlength="50" [ngClass]="{ 'has-error': isSubmitted && formControlsCustomer.FullName.errors }" />
                  <samp *ngIf="isSubmitted && formControlsCustomer.FullName.errors" class="error-red">{{'Panel.required' | translate}}</samp>
                </div>
              </div>
              <div class="form-group row">
                <label for="City" class="col-sm-3 col-form-label"> {{'Panel.City' | translate}} <samp style="font-size:11px">({{'Panel.required' | translate}})</samp></label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="City"  formControlName="City" maxlength="50" [ngClass]="{ 'has-error': isSubmitted && formControlsCustomer.City.errors }" />
                  <samp *ngIf="isSubmitted && formControlsCustomer.City.errors" class="error-red">{{'Panel.required' | translate}}</samp>
                </div>
              </div>
              <div class="form-group row">
                <label for="Address" class="col-sm-3 col-form-label"> {{'Panel.Address' | translate}} <samp style="font-size:11px">({{'Panel.required' | translate}})</samp></label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="Address"  formControlName="Address" maxlength="200" [ngClass]="{ 'has-error': isSubmitted && formControlsCustomer.Address.errors }" />
                  <samp *ngIf="isSubmitted && formControlsCustomer.Address.errors" class="error-red">{{'Panel.required' | translate}} </samp>
                </div>
              </div>
              <div class="form-group row">
                <label for="Email" class="col-sm-3 col-form-label"> {{'Panel.Email' | translate}} <samp style="font-size:11px">({{'Panel.required' | translate}})</samp></label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="Email" formControlName="Email" maxlength="200" [ngClass]="{ 'has-error': isSubmitted && formControlsCustomer.Email.errors }" />
                  <samp *ngIf="isSubmitted && formControlsCustomer.Email.errors" class="error-red">{{'Panel.required' | translate}} </samp>
                </div>
              </div>
              <div class="form-group row">
                <label for="Description" class="col-sm-3 col-form-label"> {{'Panel.Description' | translate}}</label>
                <div class="col-sm-9">
                  <textarea  class="form-control" id="Description" placeholder="{{'Panel.Description' | translate}}" formControlName="Description" rows="3" maxlength="200" ></textarea>
                </div>
              </div>
              <div class="form-group row">
                <label for="Description" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-9">
                  <div class="custom-control custom-checkbox checkbox-lg">
                    <input type="checkbox" class="custom-control-input" id="checkbox-2" formControlName="Confirm">
                    <label class="custom-control-label" for="checkbox-2">  {{'ConfirmRule' | translate}} <samp style="font-size:11px">({{'Panel.required' | translate}})</samp></label>
                  </div>
                  <samp *ngIf="isSubmitted && formControlsCustomer.Confirm.errors" class="error-red">{{'Panel.required' | translate}} </samp>
                </div>
                
                
              </div>
              <div>
                <span style="float:left;">
                  <button class="btn_price" [ngStyle]="{'color': them.PriceFontColor,'background-color':them.PriceColor}" (click)="SaveOrder()">{{'SubmitAndPayment' | translate}}</button>
                </span>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>

    <!--PageGenerator_3--->
    <div id="PageGenerator_3">

    </div>
  </div>
</div>








<!--<ngb-carousel>
  <ng-template ngbSlide *ngFor="let img of item.ProductImage">
    <img src="{{them.configUrlBasicImage}}{{img.Image_Url}}" alt="{{img.Description}}" style="width:100%;height:400px;">
    <div class="carousel-caption">
      <h3>First slide label</h3>
      <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
    </div>
  </ng-template>

</ngb-carousel>-->
